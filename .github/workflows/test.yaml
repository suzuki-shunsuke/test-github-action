---
name: test
on:
  pull_request: {}
  push:
    branches:
      - main
jobs:
  test:
    runs-on: ubuntu-24.04
    name: "test (${{matrix.target}})"
    strategy:
      fail-fast: true
      matrix:
        target: [
          foo,
          bar
        ]
    steps:
      - run: |
          test -n "$TEST_ENV"
        env:
          TEST_ENV: ${{vars.TEST_ENV}}

  status-check:
    runs-on: ubuntu-24.04
    needs: [test]
    if: always()
    steps:
      - uses: suzuki-shunsuke/required-status-check-action@latest
        with:
          needs: ${{toJson(needs)}}
