---
name: test
on:
  pull_request: {}
  push:
    branches:
      - main
jobs:
  foo:
    runs-on: ubuntu-24.04
    steps:
      - run: exit 1
        env:
          TEST_ENV: ${{vars.TEST_ENV}}

  bar:
    runs-on: ubuntu-24.04
    needs:
      - foo
    steps:
      - run: |
          test -n "$TEST_ENV"
        env:
          TEST_ENV: ${{vars.TEST_ENV}}

  status-check:
    runs-on: ubuntu-24.04
    needs: [foo, bar]
    if: always()
    steps:
      - uses: suzuki-shunsuke/required-status-check-action@latest
        with:
          needs: ${{ toJson(needs) }}
