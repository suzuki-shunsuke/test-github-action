---
name: test
on:
  pull_request: {}
  push:
    branches:
      - main
jobs:
  foo:
    runs-on: ubuntu-24.04
    outputs:
      needs: '["foo", "bar"]'
    steps:
      - run: |
          test -n "$TEST_ENV"

  bar:
    runs-on: ubuntu-24.04
    steps:
      - run: |
          test -n "$TEST_ENV"

  status-check:
    runs-on: ubuntu-24.04
    needs: [foo, bar]
    # if: needs.foo.result == 'failure' || needs.bar.result == 'failure'
    steps:
      - run: echo "$NEEDS"
        env:
          NEEDS: ${{ toJson(needs) }}
